{"pageProps":{"state":{"globalHeaders":{"https://napari-hub.org":{"level":1,"children":[],"href":"https://napari-hub.org","text":"napari hub"},"https://github.com/napari/napari":{"level":1,"children":[],"href":"https://github.com/napari/napari","text":"napari source code"},"/roadmaps/index.html":{"level":1,"children":["/roadmaps/0_4.html","/roadmaps/0_3_retrospective.html","/roadmaps/0_3.html"],"href":"/roadmaps/index.html","text":"Roadmaps"},"/roadmaps/0_3.html":{"level":2,"children":[],"href":"/roadmaps/0_3.html","text":"Roadmap 0.3"},"/roadmaps/0_3_retrospective.html":{"level":2,"children":[],"href":"/roadmaps/0_3_retrospective.html","text":"Roadmap 0.3 Retrospective"},"/roadmaps/0_4.html":{"level":2,"children":[],"href":"/roadmaps/0_4.html","text":"Roadmap 0.4"},"/release/index.html":{"level":1,"children":["/release/release_0_4_12.html","/release/release_0_4_11.html","/release/release_0_4_10.html","/release/release_0_4_9.html","/release/release_0_4_8.html","/release/release_0_4_7.html","/release/release_0_4_6.html","/release/release_0_4_5.html","/release/release_0_4_4.html","/release/release_0_4_3.html","/release/release_0_4_2.html","/release/release_0_4_1.html","/release/release_0_4_0.html","/release/release_0_3_8.html","/release/release_0_3_7.html","/release/release_0_3_6.html","/release/release_0_3_5.html","/release/release_0_3_4.html","/release/release_0_3_3.html","/release/release_0_3_2.html","/release/release_0_3_1.html","/release/release_0_3_0.html","/release/release_0_2_12.html","/release/release_0_2_11.html","/release/release_0_2_10.html","/release/release_0_2_9.html","/release/release_0_2_8.html","/release/release_0_2_7.html","/release/release_0_2_6.html","/release/release_0_2_5.html","/release/release_0_2_4.html","/release/release_0_2_3.html","/release/release_0_2_1.html","/release/release_0_2_0.html","/release/release_0_1_5.html","/release/release_0_1_3.html","/release/release_0_1_0.html"],"href":"/release/index.html","text":"Release notes"},"/release/release_0_1_0.html":{"level":2,"children":[],"href":"/release/release_0_1_0.html","text":"napari 0.1.0"},"/release/release_0_1_3.html":{"level":2,"children":[],"href":"/release/release_0_1_3.html","text":"napari 0.1.3"},"/release/release_0_1_5.html":{"level":2,"children":[],"href":"/release/release_0_1_5.html","text":"napari 0.1.5"},"/release/release_0_2_0.html":{"level":2,"children":[],"href":"/release/release_0_2_0.html","text":"napari 0.2.0"},"/release/release_0_2_1.html":{"level":2,"children":[],"href":"/release/release_0_2_1.html","text":"napari 0.2.1"},"/release/release_0_2_3.html":{"level":2,"children":[],"href":"/release/release_0_2_3.html","text":"napari 0.2.3"},"/release/release_0_2_4.html":{"level":2,"children":[],"href":"/release/release_0_2_4.html","text":"napari 0.2.4"},"/release/release_0_2_5.html":{"level":2,"children":[],"href":"/release/release_0_2_5.html","text":"napari 0.2.5"},"/release/release_0_2_6.html":{"level":2,"children":[],"href":"/release/release_0_2_6.html","text":"napari 0.2.6"},"/release/release_0_2_7.html":{"level":2,"children":[],"href":"/release/release_0_2_7.html","text":"napari 0.2.7"},"/release/release_0_2_8.html":{"level":2,"children":[],"href":"/release/release_0_2_8.html","text":"napari 0.2.8"},"/release/release_0_2_9.html":{"level":2,"children":[],"href":"/release/release_0_2_9.html","text":"napari 0.2.9"},"/release/release_0_2_10.html":{"level":2,"children":[],"href":"/release/release_0_2_10.html","text":"napari 0.2.10"},"/release/release_0_2_11.html":{"level":2,"children":[],"href":"/release/release_0_2_11.html","text":"napari 0.2.11"},"/release/release_0_2_12.html":{"level":2,"children":[],"href":"/release/release_0_2_12.html","text":"napari 0.2.12"},"/release/release_0_3_0.html":{"level":2,"children":[],"href":"/release/release_0_3_0.html","text":"napari 0.3.0"},"/release/release_0_3_1.html":{"level":2,"children":[],"href":"/release/release_0_3_1.html","text":"napari 0.3.1"},"/release/release_0_3_2.html":{"level":2,"children":[],"href":"/release/release_0_3_2.html","text":"napari 0.3.2"},"/release/release_0_3_3.html":{"level":2,"children":[],"href":"/release/release_0_3_3.html","text":"napari 0.3.3"},"/release/release_0_3_4.html":{"level":2,"children":[],"href":"/release/release_0_3_4.html","text":"napari 0.3.4"},"/release/release_0_3_5.html":{"level":2,"children":[],"href":"/release/release_0_3_5.html","text":"napari 0.3.5"},"/release/release_0_3_6.html":{"level":2,"children":[],"href":"/release/release_0_3_6.html","text":"napari 0.3.6"},"/release/release_0_3_7.html":{"level":2,"children":[],"href":"/release/release_0_3_7.html","text":"napari 0.3.7"},"/release/release_0_3_8.html":{"level":2,"children":[],"href":"/release/release_0_3_8.html","text":"napari 0.3.8"},"/release/release_0_4_0.html":{"level":2,"children":[],"href":"/release/release_0_4_0.html","text":"napari 0.4.0"},"/release/release_0_4_1.html":{"level":2,"children":[],"href":"/release/release_0_4_1.html","text":"napari 0.4.1"},"/release/release_0_4_2.html":{"level":2,"children":[],"href":"/release/release_0_4_2.html","text":"napari 0.4.2"},"/release/release_0_4_3.html":{"level":2,"children":[],"href":"/release/release_0_4_3.html","text":"napari 0.4.3"},"/release/release_0_4_4.html":{"level":2,"children":[],"href":"/release/release_0_4_4.html","text":"napari 0.4.4"},"/release/release_0_4_5.html":{"level":2,"children":[],"href":"/release/release_0_4_5.html","text":"napari 0.4.5"},"/release/release_0_4_6.html":{"level":2,"children":[],"href":"/release/release_0_4_6.html","text":"napari 0.4.6"},"/release/release_0_4_7.html":{"level":2,"children":[],"href":"/release/release_0_4_7.html","text":"napari 0.4.7"},"/release/release_0_4_8.html":{"level":2,"children":[],"href":"/release/release_0_4_8.html","text":"napari 0.4.8"},"/release/release_0_4_9.html":{"level":2,"children":[],"href":"/release/release_0_4_9.html","text":"napari 0.4.9"},"/release/release_0_4_10.html":{"level":2,"children":[],"href":"/release/release_0_4_10.html","text":"napari 0.4.10"},"/release/release_0_4_11.html":{"level":2,"children":[],"href":"/release/release_0_4_11.html","text":"napari 0.4.11"},"/release/release_0_4_12.html":{"level":2,"children":[],"href":"/release/release_0_4_12.html","text":"napari 0.4.12"},"/glossary.html":{"level":1,"children":[],"href":"/glossary.html","text":"Glossary"},"/developers/index.html":{"level":1,"children":["/developers/benchmarks.html","/developers/contributing.html","/developers/core_dev_guide.html","/developers/profiling.html","/developers/release.html","/developers/testing.html","/developers/docs.html","/developers/translations.html"],"href":"/developers/index.html","text":"Developer resources"},"/developers/translations.html":{"level":2,"children":[],"href":"/developers/translations.html","text":"Translations"},"/developers/docs.html":{"level":2,"children":[],"href":"/developers/docs.html","text":"Organization of Documentation for napari"},"/developers/testing.html":{"level":2,"children":[],"href":"/developers/testing.html","text":"Testing"},"/developers/release.html":{"level":2,"children":[],"href":"/developers/release.html","text":"Release guide"},"/developers/profiling.html":{"level":2,"children":[],"href":"/developers/profiling.html","text":"Profiling"},"/developers/core_dev_guide.html":{"level":2,"children":[],"href":"/developers/core_dev_guide.html","text":"Core Developer guide"},"/developers/contributing.html":{"level":2,"children":[],"href":"/developers/contributing.html","text":"Contributing guide"},"/developers/benchmarks.html":{"level":2,"children":[],"href":"/developers/benchmarks.html","text":"Benchmarks"},"/api/stable/index.html":{"level":1,"children":["/api/stable/napari.layers.html","/api/stable/napari.view_layers.html","/api/stable/napari.types.html","/api/stable/napari.utils.html","/api/stable/napari.plugins.html","/api/stable/napari.components.html","/api/stable/napari.qt.threading.html","/api/stable/napari.utils.perf.html","/api/stable/napari.html","/api/stable/napari.html"],"href":"/api/stable/index.html","text":"API reference"},"/api/stable/napari.html":{"level":2,"children":["/api/stable/napari.Viewer.html"],"href":"/api/stable/napari.html","text":"napari"},"/api/stable/napari.Viewer.html":{"level":3,"children":[],"href":"/api/stable/napari.Viewer.html","text":"napari.Viewer"},"/api/stable/napari.utils.perf.html":{"level":2,"children":["/api/stable/napari.utils.perf.PerfEvent.html"],"href":"/api/stable/napari.utils.perf.html","text":"napari.utils.perf"},"/api/stable/napari.utils.perf.PerfEvent.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.perf.PerfEvent.html","text":"napari.utils.perf.PerfEvent"},"/api/stable/napari.qt.threading.html":{"level":2,"children":["/api/stable/napari.qt.threading.FunctionWorker.html","/api/stable/napari.qt.threading.GeneratorWorker.html","/api/stable/napari.qt.threading.GeneratorWorkerSignals.html","/api/stable/napari.qt.threading.WorkerBase.html","/api/stable/napari.qt.threading.WorkerBaseSignals.html"],"href":"/api/stable/napari.qt.threading.html","text":"napari.qt.threading"},"/api/stable/napari.qt.threading.WorkerBaseSignals.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.WorkerBaseSignals.html","text":"napari.qt.threading.WorkerBaseSignals"},"/api/stable/napari.qt.threading.WorkerBase.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.WorkerBase.html","text":"napari.qt.threading.WorkerBase"},"/api/stable/napari.qt.threading.GeneratorWorkerSignals.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.GeneratorWorkerSignals.html","text":"napari.qt.threading.GeneratorWorkerSignals"},"/api/stable/napari.qt.threading.GeneratorWorker.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.GeneratorWorker.html","text":"napari.qt.threading.GeneratorWorker"},"/api/stable/napari.qt.threading.FunctionWorker.html":{"level":3,"children":[],"href":"/api/stable/napari.qt.threading.FunctionWorker.html","text":"napari.qt.threading.FunctionWorker"},"/api/stable/napari.components.html":{"level":2,"children":["/api/stable/napari.components.Camera.html","/api/stable/napari.components.Dims.html","/api/stable/napari.components.LayerList.html","/api/stable/napari.components.ViewerModel.html"],"href":"/api/stable/napari.components.html","text":"napari.components"},"/api/stable/napari.components.ViewerModel.html":{"level":3,"children":[],"href":"/api/stable/napari.components.ViewerModel.html","text":"napari.components.ViewerModel"},"/api/stable/napari.components.LayerList.html":{"level":3,"children":[],"href":"/api/stable/napari.components.LayerList.html","text":"napari.components.LayerList"},"/api/stable/napari.components.Dims.html":{"level":3,"children":[],"href":"/api/stable/napari.components.Dims.html","text":"napari.components.Dims"},"/api/stable/napari.components.Camera.html":{"level":3,"children":[],"href":"/api/stable/napari.components.Camera.html","text":"napari.components.Camera"},"/api/stable/napari.plugins.html":{"level":2,"children":["/api/stable/napari.plugins.NapariPluginManager.html"],"href":"/api/stable/napari.plugins.html","text":"napari.plugins"},"/api/stable/napari.plugins.NapariPluginManager.html":{"level":3,"children":[],"href":"/api/stable/napari.plugins.NapariPluginManager.html","text":"napari.plugins.NapariPluginManager"},"/api/stable/napari.utils.html":{"level":2,"children":["/api/stable/napari.utils.Colormap.html","/api/stable/napari.utils.nbscreenshot.html","/api/stable/napari.utils.progress.html"],"href":"/api/stable/napari.utils.html","text":"napari.utils"},"/api/stable/napari.utils.progress.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.progress.html","text":"napari.utils.progress"},"/api/stable/napari.utils.nbscreenshot.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.nbscreenshot.html","text":"napari.utils.nbscreenshot"},"/api/stable/napari.utils.Colormap.html":{"level":3,"children":[],"href":"/api/stable/napari.utils.Colormap.html","text":"napari.utils.Colormap"},"/api/stable/napari.types.html":{"level":2,"children":["/api/stable/napari.types.ArrayBase.html","/api/stable/napari.types.Path.html","/api/stable/napari.types.SampleDict.html","/api/stable/napari.types.TracebackType.html","/api/stable/napari.types.TypedDict.html","/api/stable/napari.types.partial.html"],"href":"/api/stable/napari.types.html","text":"napari.types"},"/api/stable/napari.types.partial.html":{"level":3,"children":[],"href":"/api/stable/napari.types.partial.html","text":"napari.types.partial"},"/api/stable/napari.types.TypedDict.html":{"level":3,"children":[],"href":"/api/stable/napari.types.TypedDict.html","text":"napari.types.TypedDict"},"/api/stable/napari.types.TracebackType.html":{"level":3,"children":[],"href":"/api/stable/napari.types.TracebackType.html","text":"napari.types.TracebackType"},"/api/stable/napari.types.SampleDict.html":{"level":3,"children":[],"href":"/api/stable/napari.types.SampleDict.html","text":"napari.types.SampleDict"},"/api/stable/napari.types.Path.html":{"level":3,"children":[],"href":"/api/stable/napari.types.Path.html","text":"napari.types.Path"},"/api/stable/napari.types.ArrayBase.html":{"level":3,"children":[],"href":"/api/stable/napari.types.ArrayBase.html","text":"napari.types.ArrayBase"},"/api/stable/napari.view_layers.html":{"level":2,"children":["/api/stable/napari.view_layers.Viewer.html"],"href":"/api/stable/napari.view_layers.html","text":"napari.view_layers"},"/api/stable/napari.view_layers.Viewer.html":{"level":3,"children":[],"href":"/api/stable/napari.view_layers.Viewer.html","text":"napari.view_layers.Viewer"},"/api/stable/napari.layers.html":{"level":2,"children":["/api/stable/napari.layers.Image.html","/api/stable/napari.layers.Labels.html","/api/stable/napari.layers.Layer.html","/api/stable/napari.layers.Points.html","/api/stable/napari.layers.Shapes.html","/api/stable/napari.layers.Surface.html","/api/stable/napari.layers.Tracks.html","/api/stable/napari.layers.Vectors.html"],"href":"/api/stable/napari.layers.html","text":"napari.layers"},"/api/stable/napari.layers.Vectors.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Vectors.html","text":"napari.layers.Vectors"},"/api/stable/napari.layers.Tracks.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Tracks.html","text":"napari.layers.Tracks"},"/api/stable/napari.layers.Surface.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Surface.html","text":"napari.layers.Surface"},"/api/stable/napari.layers.Shapes.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Shapes.html","text":"napari.layers.Shapes"},"/api/stable/napari.layers.Points.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Points.html","text":"napari.layers.Points"},"/api/stable/napari.layers.Layer.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Layer.html","text":"napari.layers.Layer"},"/api/stable/napari.layers.Labels.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Labels.html","text":"napari.layers.Labels"},"/api/stable/napari.layers.Image.html":{"level":3,"children":[],"href":"/api/stable/napari.layers.Image.html","text":"napari.layers.Image"},"/community/index.html":{"level":1,"children":["/community/mission_and_values.html","/community/team.html","/community/code_of_conduct.html","/community/code_of_conduct_reporting.html","/community/governance.html","/community/working_groups.html","/community/meeting_schedule.html"],"href":"/community/index.html","text":"Community"},"/community/meeting_schedule.html":{"level":2,"children":[],"href":"/community/meeting_schedule.html","text":"Meeting schedule"},"/community/working_groups.html":{"level":2,"children":[],"href":"/community/working_groups.html","text":"Working groups"},"/community/governance.html":{"level":2,"children":[],"href":"/community/governance.html","text":"Governance model"},"/community/code_of_conduct_reporting.html":{"level":2,"children":[],"href":"/community/code_of_conduct_reporting.html","text":"Handling Code of Conduct reports"},"/community/code_of_conduct.html":{"level":2,"children":[],"href":"/community/code_of_conduct.html","text":"Code of Conduct"},"/community/team.html":{"level":2,"children":[],"href":"/community/team.html","text":"About the project and team"},"/community/mission_and_values.html":{"level":2,"children":[],"href":"/community/mission_and_values.html","text":"Mission and Values"},"/plugins/stable/index.html":{"level":1,"children":["/plugins/stable/best_practices.html","/plugins/stable/npe2_migration_guide.html","/plugins/stable/guides.html","/plugins/stable/first_plugin.html","/plugins/stable/test_deploy.html","/plugins/stable/npe1.html","/plugins/stable/find_and_install_plugin.html","/plugins/stable/_layer_data_guide.html"],"href":"/plugins/stable/index.html","text":"Plugins"},"/plugins/stable/_layer_data_guide.html":{"level":2,"children":[],"href":"/plugins/stable/_layer_data_guide.html","text":"The LayerData tuple"},"/plugins/stable/find_and_install_plugin.html":{"level":2,"children":[],"href":"/plugins/stable/find_and_install_plugin.html","text":"Finding and installing a napari plugin"},"/plugins/stable/npe1.html":{"level":2,"children":[],"href":"/plugins/stable/npe1.html","text":"1st Gen Plugin Guide (Deprecated)"},"/plugins/stable/test_deploy.html":{"level":2,"children":[],"href":"/plugins/stable/test_deploy.html","text":"Test and Deploy"},"/plugins/stable/first_plugin.html":{"level":2,"children":[],"href":"/plugins/stable/first_plugin.html","text":"Your First Plugin"},"/plugins/stable/guides.html":{"level":2,"children":[],"href":"/plugins/stable/guides.html","text":"Contribution Guides"},"/plugins/stable/npe2_migration_guide.html":{"level":2,"children":[],"href":"/plugins/stable/npe2_migration_guide.html","text":"npe2 migration guide"},"/plugins/stable/best_practices.html":{"level":2,"children":[],"href":"/plugins/stable/best_practices.html","text":"Best practices"},"/guides/stable/index.html":{"level":1,"children":["/guides/stable/magicgui.html","/guides/stable/event_loop.html","/guides/stable/threading.html","/guides/stable/rendering-explanation.html","/guides/stable/rendering.html","/guides/stable/performance.html","/guides/stable/3D_interactivity.html","/guides/stable/events_reference.html","/guides/stable/contexts_expressions.html"],"href":"/guides/stable/index.html","text":"In-depth explanations"},"/guides/stable/contexts_expressions.html":{"level":2,"children":[],"href":"/guides/stable/contexts_expressions.html","text":"Contexts and Expressions in napari"},"/guides/stable/events_reference.html":{"level":2,"children":[],"href":"/guides/stable/events_reference.html","text":"Events reference"},"/guides/stable/3D_interactivity.html":{"level":2,"children":[],"href":"/guides/stable/3D_interactivity.html","text":"3D interactivity"},"/guides/stable/performance.html":{"level":2,"children":[],"href":"/guides/stable/performance.html","text":"napari performance"},"/guides/stable/rendering.html":{"level":2,"children":[],"href":"/guides/stable/rendering.html","text":"Asynchronous rendering"},"/guides/stable/rendering-explanation.html":{"level":2,"children":[],"href":"/guides/stable/rendering-explanation.html","text":"Rendering in napari"},"/guides/stable/threading.html":{"level":2,"children":[],"href":"/guides/stable/threading.html","text":"Multithreading in napari"},"/guides/stable/event_loop.html":{"level":2,"children":[],"href":"/guides/stable/event_loop.html","text":"An introduction to the event loop in napari"},"/guides/stable/magicgui.html":{"level":2,"children":[],"href":"/guides/stable/magicgui.html","text":"Using magicgui in napari"},"/howtos/index.html":{"level":1,"children":["/howtos/connecting_events.html","/howtos/napari_imageJ.html","/howtos/docker.html","/howtos/perfmon.html"],"href":"/howtos/index.html","text":"How-to guides"},"/howtos/perfmon.html":{"level":2,"children":[],"href":"/howtos/perfmon.html","text":"Performance monitoring"},"/howtos/docker.html":{"level":2,"children":[],"href":"/howtos/docker.html","text":"Napari in Docker"},"/howtos/napari_imageJ.html":{"level":2,"children":[],"href":"/howtos/napari_imageJ.html","text":"napari + ImageJ how-to guide"},"/howtos/connecting_events.html":{"level":2,"children":[],"href":"/howtos/connecting_events.html","text":"Hooking up your own events"},"/tutorials/index.html":{"level":1,"children":["/tutorials/segmentation/index.html","/tutorials/tracking/index.html","/tutorials/applications/annotate_points.html","/tutorials/applications/dask.html","/tutorials/further-resources/napari-workshops.html","/tutorials/tracking/cell_tracking.html","/tutorials/segmentation/annotate_segmentation.html"],"href":"/tutorials/index.html","text":"Tutorials"},"/tutorials/segmentation/annotate_segmentation.html":{"level":2,"children":[],"href":"/tutorials/segmentation/annotate_segmentation.html","text":"Annotating segmentation with text and bounding boxes"},"/tutorials/tracking/cell_tracking.html":{"level":2,"children":[],"href":"/tutorials/tracking/cell_tracking.html","text":"Single cell tracking with napari"},"/tutorials/further-resources/napari-workshops.html":{"level":2,"children":[],"href":"/tutorials/further-resources/napari-workshops.html","text":"napari workshops"},"/tutorials/applications/dask.html":{"level":2,"children":[],"href":"/tutorials/applications/dask.html","text":"Using Dask and napari to process & view large datasets"},"/tutorials/applications/annotate_points.html":{"level":2,"children":[],"href":"/tutorials/applications/annotate_points.html","text":"Annotating videos with napari"},"/tutorials/tracking/index.html":{"level":2,"children":[],"href":"/tutorials/tracking/index.html","text":"Tracking"},"/tutorials/segmentation/index.html":{"level":2,"children":[],"href":"/tutorials/segmentation/index.html","text":"Segmentation"},"/tutorials/start_index.html":{"level":1,"children":["/tutorials/fundamentals/installation.html","/tutorials/fundamentals/getting_started.html","/tutorials/fundamentals/viewer.html","/tutorials/fundamentals/image.html","/tutorials/fundamentals/labels.html","/tutorials/fundamentals/points.html","/tutorials/fundamentals/shapes.html","/tutorials/fundamentals/surface.html","/tutorials/fundamentals/tracks.html","/tutorials/fundamentals/vectors.html"],"href":"/tutorials/start_index.html","text":"Getting Started"},"/tutorials/fundamentals/vectors.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/vectors.html","text":"vectors layer tutorial"},"/tutorials/fundamentals/tracks.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/tracks.html","text":"tracks layer tutorial"},"/tutorials/fundamentals/surface.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/surface.html","text":"surface layer tutorial"},"/tutorials/fundamentals/shapes.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/shapes.html","text":"shapes layer tutorial"},"/tutorials/fundamentals/points.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/points.html","text":"points layer tutorial"},"/tutorials/fundamentals/labels.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/labels.html","text":"labels layer tutorial"},"/tutorials/fundamentals/image.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/image.html","text":"image layer tutorial"},"/tutorials/fundamentals/viewer.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/viewer.html","text":"napari viewer tutorial"},"/tutorials/fundamentals/getting_started.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/getting_started.html","text":"Getting started with napari"},"/tutorials/fundamentals/installation.html":{"level":2,"children":[],"href":"/tutorials/fundamentals/installation.html","text":"How to install napari on your machine"}},"rootGlobalHeaders":["/tutorials/start_index.html","/tutorials/index.html","/howtos/index.html","/guides/stable/index.html","/plugins/stable/index.html","/community/index.html","/api/stable/index.html","/developers/index.html","/glossary.html","/release/index.html","/roadmaps/index.html","https://github.com/napari/napari","https://napari-hub.org"],"pageTitle":"Single cell tracking with napari","pageFrontMatter":{},"previewImage":"../../_images/tracks_isbi.gif","previewDescription":"In this application note, we will use napari (requires version 0.4.0 or greater) to visualize single cell tracking data using the Tracks layer. For an overview of the Tracks layer, please see the t...","appScripts":[{"src":"/_static/documentation_options.js"},{"src":"/_static/jquery.js"},{"src":"/_static/underscore.js"},{"src":"/_static/doctools.js"},{"src":"/_static/togglebutton.js"},{"src":"/_static/clipboard.min.js"},{"src":"/_static/copybutton.js"},{"children":"var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';"},{"src":"https://unpkg.com/thebe@0.5.1/lib/index.js"},{"children":"\n        const thebe_selector = \".thebe\"\n        const thebe_selector_input = \"pre\"\n        const thebe_selector_output = \".output\"\n    "},{"src":"/_static/sphinx-thebe.js"}],"appStyleSheets":[{"href":"/_static/pygments.css","rel":"stylesheet"},{"href":"/_static/togglebutton.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/copybutton.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/mystnb.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/sphinx-thebe.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css","rel":"stylesheet","type":"text/css"},{"href":"/_static/panels-variables.06eb56fa6e07937060861dad626602ad.css","rel":"stylesheet","type":"text/css"}],"pageBodyHtml":"\n        <div id=\"documentation_options\" data-url_root=\"../../\"></div>\n        <div class=\"section\" id=\"single-cell-tracking-with-napari\">\n\n<p>In this application note, we will use napari (requires version 0.4.0 or greater) to visualize single cell tracking data using the <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer. For an overview of the <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer, please see the <a class=\"reference internal\" href=\"../fundamentals/tracks.html\"><span class=\"doc std std-doc\">tracks layer fundamentals tutorial</span></a>.</p>\n<p>This application note covers two examples:</p>\n<ol class=\"simple\">\n<li><p>Visualization of a cell tracking challenge dataset</p></li>\n<li><p>Single cell tracking using btrack and napari</p></li>\n</ol>\n<div class=\"section\" id=\"cell-tracking-challenge-data\">\n<h2>1. Cell tracking challenge data<a class=\"headerlink\" href=\"#cell-tracking-challenge-data\" title=\"Permalink to this headline\">¶</a></h2>\n<p>The first example of track visualization uses data from the <a class=\"reference external\" href=\"http://celltrackingchallenge.net/3d-datasets/\" target=\"_blank\" rel=\"noreferrer\">cell tracking challenge</a>. We will use the <em>C. elegans</em> developing embryo <a class=\"reference external\" href=\"http://data.celltrackingchallenge.net/training-datasets/Fluo-N3DH-CE.zip\" target=\"_blank\" rel=\"noreferrer\">dataset</a> which consists of 3D+t volumetric imaging data, manually annotated tracks and cell lineage information.</p>\n<p>A full description of the data format can be found <a class=\"reference external\" href=\"https://public.celltrackingchallenge.net/documents/Naming%20and%20file%20content%20conventions.pdf\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<div class=\"section\" id=\"extracting-the-tracks-from-the-dataset\">\n<h3>Extracting the tracks from the dataset<a class=\"headerlink\" href=\"#extracting-the-tracks-from-the-dataset\" title=\"Permalink to this headline\">¶</a></h3>\n<p>We need to extract the centroids of each cell and their associated track labels from the annotated dataset. We start by loading the images containing the centroids and unique track labels:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">napari</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"nn\">pd</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">skimage.io</span> <span class=\"kn\">import</span> <span class=\"n\">imread</span>\n<span class=\"kn\">from</span> <span class=\"nn\">skimage.measure</span> <span class=\"kn\">import</span> <span class=\"n\">regionprops_table</span>\n\n<span class=\"n\">PATH</span> <span class=\"o\">=</span> <span class=\"s1\">'/path/to/Fluo-N3DH-CE/'</span>\n<span class=\"n\">NUM_IMAGES</span> <span class=\"o\">=</span> <span class=\"mi\">195</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">load_image</span><span class=\"p\">(</span><span class=\"n\">idx</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Load an image from the sequence.</span>\n\n<span class=\"sd\">    Parameters</span>\n<span class=\"sd\">    ----------</span>\n<span class=\"sd\">    idx : int</span>\n<span class=\"sd\">        Index of the image to load.</span>\n\n<span class=\"sd\">    Returns</span>\n<span class=\"sd\">    -------</span>\n<span class=\"sd\">    image : np.ndarray</span>\n<span class=\"sd\">       The image specified by the index, idx</span>\n<span class=\"sd\">    \"\"\"</span>\n    <span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">PATH</span><span class=\"p\">,</span> <span class=\"s1\">'01_GT/TRA'</span><span class=\"p\">,</span> <span class=\"sa\">f</span><span class=\"s1\">'man_track</span><span class=\"si\">{</span><span class=\"n\">idx</span><span class=\"si\">:</span><span class=\"s1\">0&gt;3</span><span class=\"si\">}</span><span class=\"s1\">.tif'</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">imread</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">)</span>\n\n<span class=\"n\">stack</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">asarray</span><span class=\"p\">([</span><span class=\"n\">load_image</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"n\">NUM_IMAGES</span><span class=\"p\">)])</span>\n</pre></div>\n</div>\n<p>For each image in the time-lapse sequence, we will now extract the unique track label (<code class=\"docutils literal notranslate\"><span class=\"pre\">track_id</span></code>), centroid and timestamp in order to create the track data we will pass to the <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer. For more information on the format of the track data, please see the “tracks data” section of the <a class=\"reference internal\" href=\"../fundamentals/tracks.html\"><span class=\"doc std std-doc\">tracks layer fundamentals tutorial</span></a>.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">regionprops_plus_time</span><span class=\"p\">(</span><span class=\"n\">idx</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Return the unique track label, centroid and time for each track vertex.</span>\n\n<span class=\"sd\">    Parameters</span>\n<span class=\"sd\">    ----------</span>\n<span class=\"sd\">    idx : int</span>\n<span class=\"sd\">        Index of the image to calculate the centroids and track labels.</span>\n\n<span class=\"sd\">    Returns</span>\n<span class=\"sd\">    -------</span>\n<span class=\"sd\">    data_df : pd.DataFrame</span>\n<span class=\"sd\">       The dataframe of track data for one time step (specified by idx).</span>\n<span class=\"sd\">    \"\"\"</span>\n    <span class=\"n\">props</span> <span class=\"o\">=</span> <span class=\"n\">regionprops_table</span><span class=\"p\">(</span><span class=\"n\">stack</span><span class=\"p\">[</span><span class=\"n\">idx</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">],</span> <span class=\"n\">properties</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"s1\">'label'</span><span class=\"p\">,</span> <span class=\"s1\">'centroid'</span><span class=\"p\">))</span>\n    <span class=\"n\">props</span><span class=\"p\">[</span><span class=\"s1\">'frame'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">full</span><span class=\"p\">(</span><span class=\"n\">props</span><span class=\"p\">[</span><span class=\"s1\">'label'</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">shape</span><span class=\"p\">,</span> <span class=\"n\">idx</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">(</span><span class=\"n\">props</span><span class=\"p\">)</span>\n\n<span class=\"n\">data_df_raw</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">concat</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">regionprops_plus_time</span><span class=\"p\">(</span><span class=\"n\">idx</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">idx</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"n\">NUM_IMAGES</span><span class=\"p\">)]</span>\n<span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">reset_index</span><span class=\"p\">(</span><span class=\"n\">drop</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"c1\"># sort the data lexicographically by track_id and time</span>\n<span class=\"n\">data_df</span> <span class=\"o\">=</span> <span class=\"n\">data_df_raw</span><span class=\"o\">.</span><span class=\"n\">sort_values</span><span class=\"p\">([</span><span class=\"s1\">'label'</span><span class=\"p\">,</span> <span class=\"s1\">'frame'</span><span class=\"p\">],</span> <span class=\"n\">ignore_index</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># create the final data array: track_id, T, Z, Y, X</span>\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">data_df</span><span class=\"o\">.</span><span class=\"n\">loc</span><span class=\"p\">[</span>\n    <span class=\"p\">:,</span> <span class=\"p\">[</span><span class=\"s1\">'label'</span><span class=\"p\">,</span> <span class=\"s1\">'frame'</span><span class=\"p\">,</span> <span class=\"s1\">'centroid-0'</span><span class=\"p\">,</span> <span class=\"s1\">'centroid-1'</span><span class=\"p\">,</span> <span class=\"s1\">'centroid-2'</span><span class=\"p\">]</span>\n<span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">to_numpy</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>This represents the minimum amount of information to display tracks in napari, and can already be visualised.\nAt this point, there is no concept of track <em>links</em>, lineages, or tracks splitting or merging.\nThese single tracks are sometimes known as tracklets:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">napari</span><span class=\"o\">.</span><span class=\"n\">view_tracks</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'tracklets'</span><span class=\"p\">)</span>\n<span class=\"n\">napari</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"calculating-the-graph-using-the-lineage-information\">\n<h3>Calculating the graph using the lineage information<a class=\"headerlink\" href=\"#calculating-the-graph-using-the-lineage-information\" title=\"Permalink to this headline\">¶</a></h3>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer can also be used to visualize a track ‘graph’ using the additional keyword argument <code class=\"docutils literal notranslate\"><span class=\"pre\">graph</span></code>. The <code class=\"docutils literal notranslate\"><span class=\"pre\">graph</span></code>  represents associations between tracks, by defining the\nmapping between a <code class=\"docutils literal notranslate\"><span class=\"pre\">track_id</span></code> and the parents of the track. This graph can be useful in single cell tracking to understand the lineage of cells over multiple cell division events. For more information on the format of the track <code class=\"docutils literal notranslate\"><span class=\"pre\">graph</span></code>, please see the “tracks graph” section of the <a class=\"reference internal\" href=\"../fundamentals/tracks.html\"><span class=\"doc std std-doc\">tracks layer fundamentals tutorial</span></a>.</p>\n<p>In the cell tracking challenge dataset, cell lineage information is stored in a text file <code class=\"docutils literal notranslate\"><span class=\"pre\">man_track.txt</span></code> in the following format:</p>\n<blockquote>\n<div><p>A text file representing an acyclic graph for the whole video. Every line corresponds\nto a single track that is encoded by four numbers separated by a space:\nL - a unique label of the track (label of markers, 16-bit positive value)\nB - a zero-based temporal index of the frame in which the track begins\nE - a zero-based temporal index of the frame in which the track ends\nP - label of the parent track (0 is used when no parent is defined)</p>\n</div></blockquote>\n<p>To extract the graph, we load the text file and convert it to a Nx4 integer numpy array, where the rows represent individual tracks and the columns represent L, B, E and P:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">lbep</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">loadtxt</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">PATH</span><span class=\"p\">,</span> <span class=\"s1\">'01_GT/TRA'</span><span class=\"p\">,</span> <span class=\"s1\">'man_track.txt'</span><span class=\"p\">),</span> <span class=\"n\">dtype</span><span class=\"o\">=</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">uint</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>We can then create a dictionary representing the graph, where the key is the unique track label (L) and the value is the label of the parent track (P).</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">full_graph</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">lbep</span><span class=\"p\">[:,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]])</span>\n</pre></div>\n</div>\n<p>Finally, we remove the root nodes (<em>i.e.</em> cells without a parent) for visualization with the <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">graph</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">k</span><span class=\"p\">:</span> <span class=\"n\">v</span> <span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"n\">full_graph</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">()</span> <span class=\"k\">if</span> <span class=\"n\">v</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"traversing-the-lineage-trees-to-identify-the-root-nodes\">\n<h3>Traversing the lineage trees to identify the root nodes<a class=\"headerlink\" href=\"#traversing-the-lineage-trees-to-identify-the-root-nodes\" title=\"Permalink to this headline\">¶</a></h3>\n<p>One property that is useful to visualize in single cell tracking is the <code class=\"docutils literal notranslate\"><span class=\"pre\">track_id</span></code> of the root node of the lineage trees, <em>i.e.</em> the founder cell.\nWe create it with the following code:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">root</span><span class=\"p\">(</span><span class=\"n\">node</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Recursive function to determine the root node of each subgraph.</span>\n\n<span class=\"sd\">    Parameters</span>\n<span class=\"sd\">    ----------</span>\n<span class=\"sd\">    node : int</span>\n<span class=\"sd\">        the track_id of the starting graph node.</span>\n\n<span class=\"sd\">    Returns</span>\n<span class=\"sd\">    -------</span>\n<span class=\"sd\">    root_id : int</span>\n<span class=\"sd\">       The track_id of the root of the track specified by node.</span>\n<span class=\"sd\">    \"\"\"</span>\n    <span class=\"k\">if</span> <span class=\"n\">full_graph</span><span class=\"p\">[</span><span class=\"n\">node</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>  <span class=\"c1\"># we found the root</span>\n        <span class=\"k\">return</span> <span class=\"n\">node</span>\n    <span class=\"k\">return</span> <span class=\"n\">root</span><span class=\"p\">(</span><span class=\"n\">full_graph</span><span class=\"p\">[</span><span class=\"n\">node</span><span class=\"p\">])</span>\n\n<span class=\"n\">roots</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">k</span><span class=\"p\">:</span> <span class=\"n\">root</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"n\">full_graph</span><span class=\"o\">.</span><span class=\"n\">keys</span><span class=\"p\">()}</span>\n</pre></div>\n</div>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer enables the vertices of the tracks to be colored by user specified properties. Here, we will create a property which represents the <code class=\"docutils literal notranslate\"><span class=\"pre\">root_id</span></code> of each tree, so that cells with a common ancestor are colored the same:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">properties</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'root_id'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">roots</span><span class=\"p\">[</span><span class=\"n\">idx</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">idx</span> <span class=\"ow\">in</span> <span class=\"n\">data</span><span class=\"p\">[:,</span> <span class=\"mi\">0</span><span class=\"p\">]]}</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"visualizing-the-tracks-with-napari\">\n<h3>Visualizing the tracks with napari<a class=\"headerlink\" href=\"#visualizing-the-tracks-with-napari\" title=\"Permalink to this headline\">¶</a></h3>\n<p>Alongside the tracks, we can also visualize the fluorescence imaging data.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">timelapse</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">asarray</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">imread</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">PATH</span><span class=\"p\">,</span> <span class=\"s1\">'01'</span><span class=\"p\">,</span> <span class=\"sa\">f</span><span class=\"s1\">'t</span><span class=\"si\">{</span><span class=\"n\">i</span><span class=\"si\">:</span><span class=\"s1\">0&gt;3</span><span class=\"si\">}</span><span class=\"s1\">.tif'</span><span class=\"p\">))</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"n\">NUM_IMAGES</span><span class=\"p\">)]</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Finally, we need to adjust the scaling of the data to account for the anisotropic nature of the images. We can use the <code class=\"docutils literal notranslate\"><span class=\"pre\">scale</span></code> feature of napari layers to set the voxel size where the z dimension is different to the size in the x and y dimensions. From the dataset, the voxel size (XYZ) in microns is 0.09 x 0.09 x 1.0. Therefore we can set the scale for the layers as:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># scale factor for dimensions in TZYX order</span>\n<span class=\"n\">SCALE</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">,</span> <span class=\"mf\">1.0</span><span class=\"p\">,</span> <span class=\"mf\">0.09</span><span class=\"p\">,</span> <span class=\"mf\">0.09</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>We can now visualize the full, linked tracks in napari!</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">viewer</span> <span class=\"o\">=</span> <span class=\"n\">napari</span><span class=\"o\">.</span><span class=\"n\">Viewer</span><span class=\"p\">()</span>\n<span class=\"n\">viewer</span><span class=\"o\">.</span><span class=\"n\">add_image</span><span class=\"p\">(</span><span class=\"n\">timelapse</span><span class=\"p\">,</span> <span class=\"n\">scale</span><span class=\"o\">=</span><span class=\"n\">SCALE</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'Fluo-N3DH-CE'</span><span class=\"p\">)</span>\n<span class=\"n\">viewer</span><span class=\"o\">.</span><span class=\"n\">add_tracks</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">properties</span><span class=\"o\">=</span><span class=\"n\">properties</span><span class=\"p\">,</span> <span class=\"n\">graph</span><span class=\"o\">=</span><span class=\"n\">graph</span><span class=\"p\">,</span> <span class=\"n\">scale</span><span class=\"o\">=</span><span class=\"n\">SCALE</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'tracks'</span><span class=\"p\">)</span>\n<span class=\"n\">napari</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p><img alt=\"image: tracks isbi\" src=\"../../_images/tracks_isbi.gif\"></p>\n</div>\n</div>\n<hr class=\"docutils\">\n<div class=\"section\" id=\"using-btrack-to-track-cells\">\n<h2>2. Using <code class=\"docutils literal notranslate\"><span class=\"pre\">btrack</span></code> to track cells<a class=\"headerlink\" href=\"#using-btrack-to-track-cells\" title=\"Permalink to this headline\">¶</a></h2>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">btrack</span></code> library can be used for cell tracking. It provides a convenient <code class=\"docutils literal notranslate\"><span class=\"pre\">to_napari()</span></code> function to enable rapid visualization of the tracking results. You can learn more about the <code class=\"docutils literal notranslate\"><span class=\"pre\">btrack</span></code> library <a class=\"reference external\" href=\"https://github.com/quantumjot/BayesianTracker\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">btrack</span>\n</pre></div>\n</div>\n<p>We start by loading a file containing the centroids of all the found cells in each frame of the source movie. Note that this file only contains the locations of cells in the movie, there are no tracks yet. We can use the <code class=\"docutils literal notranslate\"><span class=\"pre\">btrack</span></code> library to load this file as a list of <code class=\"docutils literal notranslate\"><span class=\"pre\">objects</span></code> that contain information about each found cell, including the TZYX position.  The example dataset can be downloaded <a class=\"reference external\" href=\"https://raw.githubusercontent.com/quantumjot/BayesianTracker/master/examples/napari_example.csv\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">objects</span> <span class=\"o\">=</span> <span class=\"n\">btrack</span><span class=\"o\">.</span><span class=\"n\">dataio</span><span class=\"o\">.</span><span class=\"n\">import_CSV</span><span class=\"p\">(</span><span class=\"s1\">'napari_example.csv'</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Next, we set up a <code class=\"docutils literal notranslate\"><span class=\"pre\">btrack.BayesianTracker</span></code> instance using a context manager to ensure the library is properly initialized. The <code class=\"docutils literal notranslate\"><span class=\"pre\">objects</span></code> are added to the tracker using the <code class=\"docutils literal notranslate\"><span class=\"pre\">.append()</span></code> method. We also set the imaging volume using the <code class=\"docutils literal notranslate\"><span class=\"pre\">volume</span></code> property. As this is a 2D dataset, the limits of the volume are set to the XY dimensions of the image dataset, while the Z dimension is set to be very large (±1e5). In this case, setting the Z limits of the volume to be very large penalises tracks which initialize or terminate in the centre of the XY plane, unless they can be explained by corresponding cell division or death events.</p>\n<p>The tracker performs the process of linking individual cell observations into tracks and the generating the associated track graph:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">with</span> <span class=\"n\">btrack</span><span class=\"o\">.</span><span class=\"n\">BayesianTracker</span><span class=\"p\">()</span> <span class=\"k\">as</span> <span class=\"n\">tracker</span><span class=\"p\">:</span>\n\n    <span class=\"c1\"># configure the tracker using a config file</span>\n    <span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">configure_from_file</span><span class=\"p\">(</span><span class=\"s1\">'cell_config.json'</span><span class=\"p\">)</span>\n\n    <span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">objects</span><span class=\"p\">)</span>\n    <span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">volume</span><span class=\"o\">=</span><span class=\"p\">((</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">1600</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">1200</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mf\">1e5</span><span class=\"p\">,</span><span class=\"mf\">1e5</span><span class=\"p\">))</span>\n\n    <span class=\"c1\"># track and optimize</span>\n    <span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">track_interactive</span><span class=\"p\">(</span><span class=\"n\">step_size</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">optimize</span><span class=\"p\">()</span>\n\n    <span class=\"c1\"># get the tracks in a format for napari visualization</span>\n    <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">properties</span><span class=\"p\">,</span> <span class=\"n\">graph</span> <span class=\"o\">=</span> <span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_napari</span><span class=\"p\">(</span><span class=\"n\">ndim</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>We set the configuration of the tracker using a configuration file using the <code class=\"docutils literal notranslate\"><span class=\"pre\">.configure_from_file()</span></code> method. An example configuration file can be found <a class=\"reference external\" href=\"https://github.com/quantumjot/BayesianTracker/blob/master/models/cell_config.json\" target=\"_blank\" rel=\"noreferrer\">here</a>.</p>\n<p>Next, the objects are linked into tracks using the <code class=\"docutils literal notranslate\"><span class=\"pre\">.track_interactive()</span></code> method. The <code class=\"docutils literal notranslate\"><span class=\"pre\">step_size</span></code> argument specifies how many steps are taken before reporting the tracking statistics. The <code class=\"docutils literal notranslate\"><span class=\"pre\">.optimize()</span></code> method then performs a global optimization on the dataset and creates lineage trees automatically.</p>\n<p>Finally, the <code class=\"docutils literal notranslate\"><span class=\"pre\">.to_napari()</span></code> method returns the track vertices, track properties and graph in a format that can be directly visualized using the napari <code class=\"docutils literal notranslate\"><span class=\"pre\">Tracks</span></code> layer:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">viewer</span> <span class=\"o\">=</span> <span class=\"n\">napari</span><span class=\"o\">.</span><span class=\"n\">Viewer</span><span class=\"p\">()</span>\n<span class=\"n\">viewer</span><span class=\"o\">.</span><span class=\"n\">add_tracks</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">properties</span><span class=\"o\">=</span><span class=\"n\">properties</span><span class=\"p\">,</span> <span class=\"n\">graph</span><span class=\"o\">=</span><span class=\"n\">graph</span><span class=\"p\">)</span>\n<span class=\"n\">napari</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p><img alt=\"image: tracks btrack\" src=\"../../_images/tracks_btrack.png\"></p>\n<p>A notebook for this example can be found in the btrack examples directory (<a class=\"reference external\" href=\"https://github.com/quantumjot/BayesianTracker/blob/caa56fa82330e4b16b5d28150f9b60ed963165c7/examples/napari_btrack.ipynb\" target=\"_blank\" rel=\"noreferrer\"><code class=\"docutils literal notranslate\"><span class=\"pre\">napari_btrack.ipynb</span></code></a>)</p>\n</div>\n<div class=\"section\" id=\"summary\">\n<h2>Summary<a class=\"headerlink\" href=\"#summary\" title=\"Permalink to this headline\">¶</a></h2>\n<p>In this application note, we have used napari to track and visualize single cells.</p>\n</div>\n<div class=\"section\" id=\"further-reading\">\n<h2>Further reading<a class=\"headerlink\" href=\"#further-reading\" title=\"Permalink to this headline\">¶</a></h2>\n<p>References for cell tracking challenge:</p>\n<ul class=\"simple\">\n<li><p><a class=\"reference external\" href=\"https://www.nature.com/articles/nmeth.1228\" target=\"_blank\" rel=\"noreferrer\">https://www.nature.com/articles/nmeth.1228</a></p></li>\n<li><p><a class=\"reference external\" href=\"http://dx.doi.org/10.1093/bioinformatics/btu080\" target=\"_blank\" rel=\"noreferrer\">http://dx.doi.org/10.1093/bioinformatics/btu080</a></p></li>\n<li><p><a class=\"reference external\" href=\"http://dx.doi.org/10.1038/nmeth.4473\" target=\"_blank\" rel=\"noreferrer\">http://dx.doi.org/10.1038/nmeth.4473</a></p></li>\n</ul>\n<p>For a more advanced example of visualizing cell tracking data with napari, please see the Arboretum plugin for napari:</p>\n<ul class=\"simple\">\n<li><p><a class=\"reference external\" href=\"https://github.com/quantumjot/BayesianTracker\" target=\"_blank\" rel=\"noreferrer\">btrack</a></p></li>\n<li><p><a class=\"reference external\" href=\"https://github.com/quantumjot/arboretum\" target=\"_blank\" rel=\"noreferrer\">arboretum</a></p></li>\n</ul>\n</div>\n</div>\n\n    <script type=\"text/x-thebe-config\">\n    {\n        requestKernel: true,\n        binderOptions: {\n            repo: \"binder-examples/jupyter-stacks-datascience\",\n            ref: \"master\",\n        },\n        codeMirrorConfig: {\n            theme: \"abcdef\",\n            mode: \"python\"\n        },\n        kernelOptions: {\n            kernelName: \"python3\",\n            path: \"./tutorials/tracking\"\n        },\n        predefinedOutput: true\n    }\n    </script>\n    <script>kernelName = 'python3'</script>\n      ","pageHeaders":[{"href":"#cell-tracking-challenge-data","text":"1. Cell tracking challenge data"},{"href":"#using-btrack-to-track-cells","text":"2. Using btrack to track cells"},{"href":"#summary","text":"Summary"},{"href":"#further-reading","text":"Further reading"}],"ipynbSource":"","mdSource":"/_sources/tutorials/tracking/cell_tracking.md"}},"__N_SSG":true}