
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>shapes layer tutorial &#8212; napari tutorials</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="surface layer tutorial" href="surface.html" />
    <link rel="prev" title="points layer tutorial" href="points.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.ico" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">napari tutorials</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   napari tutorials
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../gallery.html">
   napari gallery
  </a>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="README.html">
   Fundamentals
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="installation.html">
     napari installation tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="getting_started.html">
     getting started with napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="viewer.html">
     napari viewer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="image.html">
     image layer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="labels.html">
     labels layer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="points.html">
     points layer tutorial
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     shapes layer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="surface.html">
     surface layer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tracks.html">
     tracks layer tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="vectors.html">
     vectors layer tutorial
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../applications/README.html">
   Applications
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../applications/annotate_segmentation.html">
     annotating segmentation with text and bounding boxes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../applications/annotate_points.html">
     annotating videos with napari
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../applications/dask.html">
     using dask and napari to process &amp; view large datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../applications/napari_imageJ.html">
     Napari + ImageJ How-to-Guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../applications/cell_tracking.html">
     single cell tracking with napari
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/fundamentals/shapes.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/fundamentals/shapes.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-simple-example">
   a simple example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arguments-of-view-shapes-and-add-shapes">
   arguments of view_shapes and add_shapes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#shapes-data">
   shapes data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-different-shape-types">
   adding different shape types
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-shapes-layer">
   creating a new shapes layer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#non-editable-mode">
   non-editable mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#d-rendering-of-shapes">
   3D rendering of shapes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pan-and-zoom-mode">
   pan and zoom mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#selecting-resizing-moving-and-deleting-shapes">
   selecting, resizing, moving, and deleting shapes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-moving-and-deleting-individual-vertices">
   adding, moving, and deleting individual vertices
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-shape-edge-and-face-colors">
   changing shape edge and face colors
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-shape-edge-widths">
   changing shape edge widths
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layer-ordering">
   layer ordering
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#copying-and-pasting-shapes">
   copying and pasting shapes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layer-visibility">
   layer visibility
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layer-opacity">
   layer opacity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#blending-layers">
   blending layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#naming-layers">
   naming layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#scaling-layers">
   scaling layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#translating-layers">
   translating layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layer-metadata">
   layer metadata
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#putting-it-all-together">
   putting it all together
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#next-steps">
   next steps
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="shapes-layer-tutorial">
<h1>shapes layer tutorial<a class="headerlink" href="#shapes-layer-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Welcome to the tutorial on the <strong>napari</strong> <code class="docutils literal notranslate"><span class="pre">Shapes</span></code> layer!</p>
<p>This tutorial assumes you have already installed <strong>napari</strong>,
know how to launch the viewer,
and are familiar with its layout.
For help with installation see our <a class="reference internal" href="installation.html"><span class="doc std std-doc">installation</span></a> tutorial.
For help getting started with the viewer see our <a class="reference internal" href="getting_started.html"><span class="doc std std-doc">getting started</span></a> tutorial.
For help understanding the organisation of the viewer,
including things like the layers list,
the layer properties widgets,
the layer control panels,
and the dimension sliders see our <a class="reference internal" href="viewer.html"><span class="doc std std-doc">napari viewer</span></a> tutorial.</p>
<p>This tutorial will teach you about the <strong>napari</strong> <code class="docutils literal notranslate"><span class="pre">Shapes</span></code> layer,
including how to display and edit shapes like rectangle, ellipses, polygons, paths, and lines.
At the end of the tutorial you should understand how to add a shapes layer
and edit it from the GUI and from the console.</p>
<p>The points layer allows you to display a list of an NxD arrays,
where each array corresponds to one shape, specified by N points in D coordinates.
You can adjust the position, size, face color, edge color, and opacity of all the shapes independently, both programmatically and from the GUI.</p>
<div class="section" id="a-simple-example">
<h2>a simple example<a class="headerlink" href="#a-simple-example" title="Permalink to this headline">¶</a></h2>
<p>You can create a new viewer and add a list of shapes in one go using the <code class="docutils literal notranslate"><span class="pre">napari.view_shapes</span></code> method,
or if you already have an existing viewer, you can add shapes to it using <code class="docutils literal notranslate"><span class="pre">viewer.add_shapes</span></code>.
The api of both methods is the same.
In these examples we’ll mainly use <code class="docutils literal notranslate"><span class="pre">add_shapes</span></code> to overlay shapes onto on an existing image.</p>
<p>In this example of we will overlay some shapes on the image of a photographer:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">gui</span> qt  # we need to start the Qt event loop before importing napari
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ERROR:root:Invalid GUI request &#39;qt # we need to start the Qt event loop before importing napari&#39;, valid ones are:dict_keys([&#39;inline&#39;, &#39;nbagg&#39;, &#39;notebook&#39;, &#39;ipympl&#39;, &#39;widget&#39;, None, &#39;qt4&#39;, &#39;qt&#39;, &#39;qt5&#39;, &#39;wx&#39;, &#39;tk&#39;, &#39;gtk&#39;, &#39;gtk3&#39;, &#39;osx&#39;, &#39;asyncio&#39;])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">napari</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>

<span class="c1"># create the list of polygons</span>
<span class="n">triangle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="p">[</span><span class="mi">111</span><span class="p">,</span> <span class="mi">113</span><span class="p">],</span> <span class="p">[</span><span class="mi">22</span><span class="p">,</span> <span class="mi">246</span><span class="p">]])</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">505</span><span class="p">,</span> <span class="mi">60</span><span class="p">],</span> <span class="p">[</span><span class="mi">402</span><span class="p">,</span> <span class="mi">71</span><span class="p">],</span> <span class="p">[</span><span class="mi">383</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span> <span class="p">[</span><span class="mi">251</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="p">[</span><span class="mi">212</span><span class="p">,</span> <span class="mi">59</span><span class="p">],</span>
                   <span class="p">[</span><span class="mi">131</span><span class="p">,</span> <span class="mi">137</span><span class="p">],</span> <span class="p">[</span><span class="mi">126</span><span class="p">,</span> <span class="mi">187</span><span class="p">],</span> <span class="p">[</span><span class="mi">191</span><span class="p">,</span> <span class="mi">204</span><span class="p">],</span> <span class="p">[</span><span class="mi">171</span><span class="p">,</span> <span class="mi">248</span><span class="p">],</span> <span class="p">[</span><span class="mi">211</span><span class="p">,</span> <span class="mi">260</span><span class="p">],</span>
                   <span class="p">[</span><span class="mi">273</span><span class="p">,</span> <span class="mi">243</span><span class="p">],</span> <span class="p">[</span><span class="mi">264</span><span class="p">,</span> <span class="mi">225</span><span class="p">],</span> <span class="p">[</span><span class="mi">430</span><span class="p">,</span> <span class="mi">173</span><span class="p">],</span> <span class="p">[</span><span class="mi">512</span><span class="p">,</span> <span class="mi">160</span><span class="p">]])</span>
<span class="n">building</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">310</span><span class="p">,</span> <span class="mi">382</span><span class="p">],</span> <span class="p">[</span><span class="mi">229</span><span class="p">,</span> <span class="mi">381</span><span class="p">],</span> <span class="p">[</span><span class="mi">209</span><span class="p">,</span> <span class="mi">401</span><span class="p">],</span> <span class="p">[</span><span class="mi">221</span><span class="p">,</span> <span class="mi">411</span><span class="p">],</span>
                     <span class="p">[</span><span class="mi">258</span><span class="p">,</span> <span class="mi">411</span><span class="p">],</span> <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">412</span><span class="p">],</span> <span class="p">[</span><span class="mi">306</span><span class="p">,</span> <span class="mi">435</span><span class="p">],</span> <span class="p">[</span><span class="mi">268</span><span class="p">,</span> <span class="mi">434</span><span class="p">],</span>
                     <span class="p">[</span><span class="mi">265</span><span class="p">,</span> <span class="mi">454</span><span class="p">],</span> <span class="p">[</span><span class="mi">298</span><span class="p">,</span> <span class="mi">461</span><span class="p">],</span> <span class="p">[</span><span class="mi">307</span><span class="p">,</span> <span class="mi">461</span><span class="p">],</span> <span class="p">[</span><span class="mi">307</span><span class="p">,</span> <span class="mi">507</span><span class="p">],</span>
                     <span class="p">[</span><span class="mi">349</span><span class="p">,</span> <span class="mi">510</span><span class="p">],</span> <span class="p">[</span><span class="mi">352</span><span class="p">,</span> <span class="mi">369</span><span class="p">],</span> <span class="p">[</span><span class="mi">330</span><span class="p">,</span> <span class="mi">366</span><span class="p">],</span> <span class="p">[</span><span class="mi">330</span><span class="p">,</span> <span class="mi">366</span><span class="p">]])</span>
<span class="n">polygons</span> <span class="o">=</span> <span class="p">[</span><span class="n">triangle</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">building</span><span class="p">]</span>

<span class="c1"># add the image</span>
<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">view_image</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">camera</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;photographer&#39;</span><span class="p">)</span>

<span class="c1"># add the polygons</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">add_shapes</span><span class="p">(</span><span class="n">polygons</span><span class="p">,</span> <span class="n">shape_type</span><span class="o">=</span><span class="s1">&#39;polygon&#39;</span><span class="p">,</span> <span class="n">edge_width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                          <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;coral&#39;</span><span class="p">,</span> <span class="n">face_color</span><span class="o">=</span><span class="s1">&#39;royalblue&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING: QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to &#39;/tmp/runtime-runner&#39;
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING:vispy:QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to &#39;/tmp/runtime-runner&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">napari.utils</span> <span class="kn">import</span> <span class="n">nbscreenshot</span>

<span class="n">nbscreenshot</span><span class="p">(</span><span class="n">viewer</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/shapes_6_0.png" src="../_images/shapes_6_0.png" />
</div>
</div>
</div>
<div class="section" id="arguments-of-view-shapes-and-add-shapes">
<h2>arguments of view_shapes and add_shapes<a class="headerlink" href="#arguments-of-view-shapes-and-add-shapes" title="Permalink to this headline">¶</a></h2>
<p>Both <code class="docutils literal notranslate"><span class="pre">view_shapes</span></code> and <code class="docutils literal notranslate"><span class="pre">add_shapes</span></code> have the following doc strings:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>napari.view_shapes<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="shapes-data">
<h2>shapes data<a class="headerlink" href="#shapes-data" title="Permalink to this headline">¶</a></h2>
<p>The input data to the shapes layer must be a list of NxD numpy array,
with each array containing the coordinates of the N vertices in D dimensions that make up the shape.
The ordering of these dimensions is the same as the ordering of the dimensions for image layers.
This list of arrays is always accessible through the <code class="docutils literal notranslate"><span class="pre">layer.data</span></code> property
and will grow or shrink as new shapes are either added or deleted.
By storing data as a list of arrays
it is possible for each shape to have a different number of vertices in it.
This is especially useful when drawing polygons or paths.</p>
</div>
<div class="section" id="adding-different-shape-types">
<h2>adding different shape types<a class="headerlink" href="#adding-different-shape-types" title="Permalink to this headline">¶</a></h2>
<p>Right now the shapes layer supports 5 types of shapes,
<code class="docutils literal notranslate"><span class="pre">Lines</span></code>, <code class="docutils literal notranslate"><span class="pre">Rectangles</span></code>, <code class="docutils literal notranslate"><span class="pre">Ellipses</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygons</span></code>, and <code class="docutils literal notranslate"><span class="pre">Paths</span></code>.
When adding new data can set the shape type through the <code class="docutils literal notranslate"><span class="pre">shape_type</span></code> keyword argument,
as either a single shape type if all the shapes to be added have the same type
or as a list of shape types if some of the shapes have different types.
The actual shape types of all the shapes is accessible through the <code class="docutils literal notranslate"><span class="pre">layer.shape_types</span></code> property.
Selecting different shape creation tools will cause shapes of the different types to be added.</p>
<p><code class="docutils literal notranslate"><span class="pre">Lines</span></code> consist of two vertices representing the end points of the line.
The line creation tool can be selected from the layer control panel
or by pressing the <code class="docutils literal notranslate"><span class="pre">L</span></code> key when the shapes layer is selected.
When adding a new line
the first click will coordinates of the first endpoint
and the second click will mark the coordinates of the second endpoint.
You’ll then be able to add another line.</p>
<p><code class="docutils literal notranslate"><span class="pre">Rectangles</span></code> can be added using two vertices representing the corners of the rectangle for axis aligned rectangle,
or using four corners so that non-axis aligned rectangle can be represented too.
Internally we use the four vertex representation so we can always support rotated rectangles.
The rectangle creation tool can be selected from the layer control panel
or by pressing the <code class="docutils literal notranslate"><span class="pre">R</span></code> key when the shapes layer is selected.
When adding a rectangle you must click and drag the rectangle to have the desired shape.
When you release the mouse the rectangle will be completed
and you’ll then be able to add another one.
If you just make a single click
then a rectangle of default size will be created centered on that click.</p>
<p><code class="docutils literal notranslate"><span class="pre">Ellipses</span></code> can be added using either two vectors,
one representing the center position of the ellipse
and the other representing the radii of the ellipse in all dimensions for an axis aligned ellipse,
or by using the four corners of the ellipse bounding box for a non-axis aligned ellipse.
Internally we use the four vertex representation so we can always support rotated ellipses.
The ellipse creation tool can be selected from the layer control panel
or by pressing the <code class="docutils literal notranslate"><span class="pre">E</span></code> key when the shapes layer is selected.
When adding an ellipse you must click and drag the ellipse to have the desired shape.
When you release the mouse
the ellipse will be completed
and you’ll then be able to add another one.
If you just make a single click
then an ellipse of default size will be created centered on that click.</p>
<p><code class="docutils literal notranslate"><span class="pre">Polygons</span></code> can be added using an array of N vertices.
Polygons are closed by default,
and so you don’t also need to include the first point at the end of the array.
The order of the vertices will determine the triangulation of the polygon,
which can be non-convex, but cannot have holes.
The polygon creation tool can be selected from the layer control panel
or by pressing the <code class="docutils literal notranslate"><span class="pre">P</span></code> key when the shapes layer is selected.
When adding a polygon
each click will add a vertex at the clicked location.
To finish drawing a polygon you must click the <code class="docutils literal notranslate"><span class="pre">escape</span></code> key,
which will add a final vertex at the current mouse position and complete the polygon.
You’ll then be able to start adding another one.</p>
<p><code class="docutils literal notranslate"><span class="pre">Paths</span></code> are like polygons but are not closed or filled in.
They can also be added using an array of N vertices.
The path creation tool can be selected from the layer control panel
or by pressing the <code class="docutils literal notranslate"><span class="pre">T</span></code> key when the shapes layer is selected.
When adding a path each click will add a vertex at the clicked location.
To finish drawing a path you must click the <code class="docutils literal notranslate"><span class="pre">escape</span></code> key,
which will add a final vertex at the current mouse position and complete the path.
You’ll then be able to start adding another one.</p>
<p>When using the shapes addition or editing tools
the pan and zoom functionality of the viewer canvas is disabled and you can edit the layer.
You can temporarily re-enable pan and zoom
by pressing and holding the spacebar.
This feature can be useful if you want to move around the shapes layer as you edit it.</p>
</div>
<div class="section" id="creating-a-new-shapes-layer">
<h2>creating a new shapes layer<a class="headerlink" href="#creating-a-new-shapes-layer" title="Permalink to this headline">¶</a></h2>
<p>As you can add new shapes to a shapes layer using the various shape creation tools,
it is possible to create a brand-new empty shapes layers
by clicking the new shapes layer button above the layers list.
The shape of the shapes layer is defined by the shapes inside it,
and so as you add new shapes the shape will adjust as needed.
The dimension of the new shapes layer will default to the largest dimension of any layer currently in the viewer,
or to 2 if no other layers are present in the viewer.</p>
</div>
<div class="section" id="non-editable-mode">
<h2>non-editable mode<a class="headerlink" href="#non-editable-mode" title="Permalink to this headline">¶</a></h2>
<p>If you want to disable editing of the shapes layer
you can set the <code class="docutils literal notranslate"><span class="pre">editable</span></code> property of the layer to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>As note in the section on 3D rendering,
when using 3D rendering the shapes layer is not editable.</p>
</div>
<div class="section" id="d-rendering-of-shapes">
<h2>3D rendering of shapes<a class="headerlink" href="#d-rendering-of-shapes" title="Permalink to this headline">¶</a></h2>
<p>All our layers can be rendered in both 2D and 3D mode,
and one of our viewer buttons can toggle between each mode.
The number of dimensions sliders will be 2 or 3 less than the total number of dimensions of the layer.
See for example the <a class="reference external" href="https://github.com/napari/napari/blob/master/examples/nD_shapes.py"><code class="docutils literal notranslate"><span class="pre">examples/nD_shapes.py</span></code></a> to see shapes in both 2D and 3D:</p>
<p><img alt="image: nD shapes" src="../_images/nD_shapes.gif" /></p>
<p>Note though that when entering 3D rendering mode
the shape editing tools are all disabled.
Those options are only supported when viewing a layer using 2D rendering.</p>
<p>Also note that for a multidimensional shape to be displayed on a given view slice
all of its non-displayed coordinates must match the coordinates of that view slice,
i.e. the shape must be entirely defined within that plane.</p>
<p>For paths that are defined by coordinates spanning more than two dimensions,
it is possible to visualize them as 3D cylinders, see for example the <a class="reference external" href="https://github.com/napari/napari/blob/master/examples/3D_paths.py"><code class="docutils literal notranslate"><span class="pre">examples/3D_paths.py</span></code></a></p>
<p><img alt="image: 3D paths" src="../_images/3D_paths.png" /></p>
<p>Right now, it is not possible to display 3D cuboids or 3D spheroids,
but will be supporting those options soon.</p>
</div>
<div class="section" id="pan-and-zoom-mode">
<h2>pan and zoom mode<a class="headerlink" href="#pan-and-zoom-mode" title="Permalink to this headline">¶</a></h2>
<p>The default mode of the shapes layer is to support panning and zooming, as in the image layer.
This mode is represented by the magnifying glass in the layers control panel,
and while it is selected editing the layer is not possible.
Continue reading to learn how to use some of the editing modes.
You can always return to pan and zoom mode by pressing the <code class="docutils literal notranslate"><span class="pre">Z</span></code> key
when the shapes layer is selected.</p>
</div>
<div class="section" id="selecting-resizing-moving-and-deleting-shapes">
<h2>selecting, resizing, moving, and deleting shapes<a class="headerlink" href="#selecting-resizing-moving-and-deleting-shapes" title="Permalink to this headline">¶</a></h2>
<p>New shapes can be added using one of the 5 shape creation tools,
for <code class="docutils literal notranslate"><span class="pre">Lines</span></code>, <code class="docutils literal notranslate"><span class="pre">Rectangles</span></code>, <code class="docutils literal notranslate"><span class="pre">Ellipses</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygons</span></code>, and <code class="docutils literal notranslate"><span class="pre">Paths</span></code>.
For more information on the different shape types see the shape types section.</p>
<p>You can select a shape by clicking on it using the shape selection tool,
which can be selected by clicking on it in the layer controls panel
or by pressing the <code class="docutils literal notranslate"><span class="pre">S</span></code> key when the shapes layer is selected.
Once selected you can move the shape by dragging it.
You can also resize the shape by clicking and dragging on one of the handles along the edge of the shape bounding box.
You can also rotate the shape by clicking and dragging on the rotation handle above the shape bounding box.</p>
<p>When resizing a layer if you hold down the <code class="docutils literal notranslate"><span class="pre">shift</span></code> key
the aspect ratio of the shape will lock and you can continue to resize the shape now with a fixed aspect ratio.</p>
<p>You can select multiple shapes by continuing to shift click on additional shapes after the first,
or by dragging a bounding box around the shapes you want to select.</p>
<p>You can select all the shapes in the currently viewed slice by clicking the <code class="docutils literal notranslate"><span class="pre">A</span></code> key if you are in select mode.</p>
<p>Once selected you can delete the selected shapes by clicking on the delete button in the layer controls panel or pressing the delete key.</p>
<p>For example see below:
<img alt="image: shape resizing" src="../_images/shape_resizing.gif" /></p>
</div>
<div class="section" id="adding-moving-and-deleting-individual-vertices">
<h2>adding, moving, and deleting individual vertices<a class="headerlink" href="#adding-moving-and-deleting-individual-vertices" title="Permalink to this headline">¶</a></h2>
<p>You can move individual vertices by entering the direct selection mode
by either clicking on the direct select tool in the layer controls panel
or pressing the <code class="docutils literal notranslate"><span class="pre">D</span></code> key while the shapes layer is selected.
To move a vertex, you can click and drag it to its new position.</p>
<p>You can add vertices to a selected shape using the vertex addition tool
which can be selected either clicking on the vertex addition tool in the layer controls panel
or pressing the <code class="docutils literal notranslate"><span class="pre">I</span></code> key while the shapes layer is selected.</p>
<p>You can delete vertices to a selected shape using the vertex deletion tool
which can be selected either clicking on the vertex deletion tool in the layer controls panel
or pressing the <code class="docutils literal notranslate"><span class="pre">X</span></code> key while the shapes layer is selected.</p>
<p>For example see below:
<img alt="image: shape vertex editing" src="../_images/shape_vertex_editing.gif" /></p>
</div>
<div class="section" id="changing-shape-edge-and-face-colors">
<h2>changing shape edge and face colors<a class="headerlink" href="#changing-shape-edge-and-face-colors" title="Permalink to this headline">¶</a></h2>
<p>Individual shapes can each have different edge and face colors.
You can initially set these colors by providing a list of colors to the <code class="docutils literal notranslate"><span class="pre">edge_color</span></code> or <code class="docutils literal notranslate"><span class="pre">face_color</span></code> keyword arguments respectively,
or you can edit them from the GUI.
The colors of each of the shapes are available as lists under the <code class="docutils literal notranslate"><span class="pre">layer.edge_colors</span></code> and <code class="docutils literal notranslate"><span class="pre">layer.face_colors</span></code> properties.
These properties are different from the <code class="docutils literal notranslate"><span class="pre">layer.edge_color</span></code> and <code class="docutils literal notranslate"><span class="pre">layer.face_color</span></code> properties
that will determine the color of the next shape to be added or any currently selected shapes.</p>
<p>To change the shape color properties from the GUI
you must first select the shape whose properties you want to change,
otherwise you will just be initializing the property for the next shape you add.</p>
</div>
<div class="section" id="changing-shape-edge-widths">
<h2>changing shape edge widths<a class="headerlink" href="#changing-shape-edge-widths" title="Permalink to this headline">¶</a></h2>
<p>Individual shapes can each have different edge widths.
You can initially set the edge widths by providing a list of values to the <code class="docutils literal notranslate"><span class="pre">edge_width</span></code> keyword arguments respectively,
or you can edit them from the GUI.
The widths of each of the shapes are available as a list under the <code class="docutils literal notranslate"><span class="pre">layer.edge_widths</span></code> property.
Similar to the edge and face colors, these property is different from the <code class="docutils literal notranslate"><span class="pre">layer.edge_width</span></code> property
that will determine the edge width of the next shape to be added or any currently selected shapes.</p>
<p>To change the edge with property from the GUI
you must first select the shape whose properties you want to change,
otherwise you will just be initializing the property for the next shape you add.</p>
</div>
<div class="section" id="layer-ordering">
<h2>layer ordering<a class="headerlink" href="#layer-ordering" title="Permalink to this headline">¶</a></h2>
<p>You can adjust the ordering of shapes in the layer
by selecting shapes and then clicking the move to front or move to back buttons.
You can get the ordering of all the shapes using the <code class="docutils literal notranslate"><span class="pre">layer.z_indices</span></code> property.
You can also set the initial ordering of shapes by passing a list to the <code class="docutils literal notranslate"><span class="pre">layer.z_index</span></code> property.</p>
</div>
<div class="section" id="copying-and-pasting-shapes">
<h2>copying and pasting shapes<a class="headerlink" href="#copying-and-pasting-shapes" title="Permalink to this headline">¶</a></h2>
<p>It is possible to copy and paste any selected shapes using the <code class="docutils literal notranslate"><span class="pre">ctrl-C</span></code> and <code class="docutils literal notranslate"><span class="pre">ctrl-V</span></code> keybindings respectively.
If you have a multidimensional shapes layer you can copy shapes from one slice to another
by pasting them into the new slice.
The coordinates of the shapes in the visible dimensions will be in the same place on the new slice as in the old slice,
but the rest of the coordinates will be updated with the new slice values.</p>
</div>
<div class="section" id="layer-visibility">
<h2>layer visibility<a class="headerlink" href="#layer-visibility" title="Permalink to this headline">¶</a></h2>
<p>All our layers support a visibility toggle that allows you to set the <code class="docutils literal notranslate"><span class="pre">visible</span></code> property of each layer.
This property is located inside the layer widget in the layers list and is represented by an eye icon.</p>
</div>
<div class="section" id="layer-opacity">
<h2>layer opacity<a class="headerlink" href="#layer-opacity" title="Permalink to this headline">¶</a></h2>
<p>All our layers support an opacity slider and <code class="docutils literal notranslate"><span class="pre">opacity</span></code> property
that allow you to adjust the layer opacity between 0, fully invisible, and 1, fully visible.
The opacity value applies individually to each shape in the layer,
and so you must have shapes selected for it to have an effect.</p>
<p>You can also initialize the shape opacities using the <code class="docutils literal notranslate"><span class="pre">opacity</span></code> keyword argument
which accepts either a list of opacities or a single opacity value that will be applied globally.
You can then access the opacity of every shape using the <code class="docutils literal notranslate"><span class="pre">layer.opacities</span></code> property.
Note that this property is different from the <code class="docutils literal notranslate"><span class="pre">layer.opacity</span></code> property
that determines the opacity of the next shape to be added.</p>
</div>
<div class="section" id="blending-layers">
<h2>blending layers<a class="headerlink" href="#blending-layers" title="Permalink to this headline">¶</a></h2>
<p>All our layers support three blending modes <code class="docutils literal notranslate"><span class="pre">translucent</span></code>, <code class="docutils literal notranslate"><span class="pre">additive</span></code>, and <code class="docutils literal notranslate"><span class="pre">opaque</span></code>
that determine how the visuals for this layer get mixed with the visuals from the other layers.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">opaque</span></code> layer renders all the other layers below it invisible
and will fade to black as you decrease its opacity.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">translucent</span></code> setting will cause the layer to blend with the layers below it if you decrease its opacity
but will fully block those layers if its opacity is 1.
This is a reasonable default, useful for many applications.</p>
<p>The final blending mode <code class="docutils literal notranslate"><span class="pre">additive</span></code> will cause the layer to blend with the layers below
even when it has full opacity.
This mode is especially useful for visualizing multiple layers at the same time.</p>
</div>
<div class="section" id="naming-layers">
<h2>naming layers<a class="headerlink" href="#naming-layers" title="Permalink to this headline">¶</a></h2>
<p>All our layers support a <code class="docutils literal notranslate"><span class="pre">name</span></code> property
that can be set inside a text box inside the layer widget in the layers list.
The name of each layer is forced into being unique
so that you can use the name to index into <code class="docutils literal notranslate"><span class="pre">viewer.layers</span></code> to retrieve the layer object.</p>
</div>
<div class="section" id="scaling-layers">
<h2>scaling layers<a class="headerlink" href="#scaling-layers" title="Permalink to this headline">¶</a></h2>
<p>All our layers support a <code class="docutils literal notranslate"><span class="pre">scale</span></code> property and keyword argument
that will rescale the layer multiplicatively according to the scale values (one for each dimension).
This property can be particularly useful for viewing anisotropic data
where the size of the voxel in the z dimension might be different then the size in the x and y dimensions.</p>
</div>
<div class="section" id="translating-layers">
<h2>translating layers<a class="headerlink" href="#translating-layers" title="Permalink to this headline">¶</a></h2>
<p>All our layers support a <code class="docutils literal notranslate"><span class="pre">translate</span></code> property and keyword argument
that you can use to offset a layer relative to the other layers,
which could be useful if you are trying to overlay two layers for image registration purposes.</p>
</div>
<div class="section" id="layer-metadata">
<h2>layer metadata<a class="headerlink" href="#layer-metadata" title="Permalink to this headline">¶</a></h2>
<p>All our layers also support a <code class="docutils literal notranslate"><span class="pre">metadata</span></code> property and keyword argument
that you can use to store an arbitrary metadata dictionary on the layer.</p>
</div>
<div class="section" id="putting-it-all-together">
<h2>putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h2>
<p>Here you can see an example of adding, selecting, and editing shapes and change their properties:</p>
<p><img alt="image: editing shapes" src="../_images/editing_shapes.gif" /></p>
</div>
<div class="section" id="next-steps">
<h2>next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>Hopefully, this tutorial has given you a detailed understanding of the <code class="docutils literal notranslate"><span class="pre">Shapes</span></code> layer,
including how to create one and control its properties.
To learn more about some of the other layer types that <strong>napari</strong> supports
checkout some more of our tutorials listed below.
The <a class="reference internal" href="surface.html"><span class="doc std std-doc">surface layer</span></a> tutorial is a great one to try next as it describes rendering complex surfaces.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./fundamentals"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="points.html" title="previous page">points layer tutorial</a>
    <a class='right-next' id="next-link" href="surface.html" title="next page">surface layer tutorial</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>